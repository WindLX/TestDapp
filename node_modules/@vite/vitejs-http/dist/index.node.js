!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("$vite_HTTP",[],t):"object"==typeof exports?exports.$vite_HTTP=t():e.$vite_HTTP=t()}(this,(()=>(()=>{var e={52043:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const s={CONNECT:function(e){return new Error("CONNECTION ERROR: Couldn't connect to node ".concat(e,"."))},ABORT:function(){return new Error("ABORT ERROR: Request already aborted.")},PARAMS:function(){return new Error("PARAMS ERROR.")},TIMEOUT:function(e){return new Error("CONNECTION TIMEOUT: timeout of ".concat(e," ms achived"))},INVALID_RESPONSE:function(e){return new Error("Invalid JSON RPC response: ".concat(JSON.stringify(e)))},IPC_ON:function(e){return new Error("Invalid IPC event on: ".concat(JSON.stringify(e)))},IPC_ON_CB:function(e){return new Error("The IPC on event ".concat(JSON.stringify(e),", cb is necessary"))}};function n(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var o=r(3995);const i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ERRORS=s,this.jsonrpc=o,this._requestManager={},this._requestId=0}var t,r;return t=e,r=[{key:"abort",value:function(){var e=this;Object.values(this._requestManager).forEach((function(t){var r=t.request,s=t.rej;r.abort(),s(e.ERRORS.ABORT())})),this._requestManager={}}},{key:"_addReq",value:function(e){var t=e.request,r={request:t,rej:e.rej};return this._requestManager[t.id]=r,r}},{key:"_removeReq",value:function(e){delete this._requestManager[e.request.id]}},{key:"_getRequestPayload",value:function(e,t){return e?(this._requestId++,this.jsonrpc.request(this._requestId,e,t)):s.PARAMS()}},{key:"_getNotificationPayload",value:function(e,t){return e?this.jsonrpc.notification(e,t):s.PARAMS()}},{key:"_getBatchPayload",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e||!e.length)return s.PARAMS();for(var t=[],r=0;r<e.length;r++){var n=e[r];if(!n||!n.type||"request"!==n.type&&"notification"!==n.type)return s.PARAMS();var o="notification"===n.type?this._getNotificationPayload(n.methodName,n.params):this._getRequestPayload(n.methodName,n.params);if(o instanceof Error)return o;t.push(o)}return t}}],r&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},3995:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ErrorObject:()=>u,JsonRpc:()=>o,JsonRpcError:()=>c,JsonRpcParsed:()=>h,NotificationObject:()=>a,RequestObject:()=>i,SuccessObject:()=>l,default:()=>P,error:()=>_,jsonrpc:()=>S,notification:()=>d,parse:()=>y,parseJsonRpcObject:()=>g,parseJsonRpcString:()=>v,parseObject:()=>E,request:()=>p,success:()=>f});const s=Object.prototype.hasOwnProperty,n="function"==typeof Number.isSafeInteger?Number.isSafeInteger:function(e){return"number"==typeof e&&isFinite(e)&&e===Math.floor(e)&&Math.abs(e)<=9007199254740991};class o{constructor(){this.jsonrpc="2.0"}serialize(){return JSON.stringify(this)}}o.VERSION="2.0";class i extends o{constructor(e,t,r){super(),this.id=e,this.method=t,void 0!==r&&(this.params=r)}}class a extends o{constructor(e,t){super(),this.method=e,void 0!==t&&(this.params=t)}}class l extends o{constructor(e,t){super(),this.id=e,this.result=t}}class u extends o{constructor(e,t){super(),this.id=e,this.error=t,this.id=e,this.error=t}}class h{constructor(e,t){this.payload=e,this.type=t,this.payload=e,this.type=t}}class c{constructor(e,t,r){this.message=e,this.code=n(t)?t:0,null!=r&&(this.data=r)}}function p(e,t,r){const s=new i(e,t,r);return R(s,!0),s}function d(e,t){const r=new a(e,t);return R(r,!0),r}function f(e,t){const r=new l(e,t);return R(r,!0),r}function _(e,t){const r=new u(e,t);return R(r,!0),r}function y(e){if(!O(e))return new h(c.invalidRequest(e),"invalid");let t;try{t=JSON.parse(e)}catch(t){return new h(c.parseError(e),"invalid")}return g(t)}function g(e){if(!Array.isArray(e))return E(e);if(0===e.length)return new h(c.invalidRequest(e),"invalid");const t=[];for(let r=0,s=e.length;r<s;r++)t[r]=E(e[r]);return t}c.invalidRequest=function(e){return new c("Invalid request",-32600,e)},c.methodNotFound=function(e){return new c("Method not found",-32601,e)},c.invalidParams=function(e){return new c("Invalid params",-32602,e)},c.internalError=function(e){return new c("Internal error",-32603,e)},c.parseError=function(e){return new c("Parse error",-32700,e)};const v=y;function E(e){let t=null,r=null,n="invalid";if(null==e||e.jsonrpc!==o.VERSION)t=c.invalidRequest(e),n="invalid";else if(s.call(e,"id")){if(s.call(e,"method")){const s=e;r=new i(s.id,s.method,s.params),t=R(r),n="request"}else if(s.call(e,"result")){const s=e;r=new l(s.id,s.result),t=R(r),n="success"}else if(s.call(e,"error")){const s=e;if(n="error",null==s.error)t=c.internalError(s);else{const e=new c(s.error.message,s.error.code,s.error.data);e.message!==s.error.message||e.code!==s.error.code?t=c.internalError(s):(r=new u(s.id,e),t=R(r))}}}else{const s=e;r=new a(s.method,s.params),t=R(r),n="notification"}return null==t&&null!=r?new h(r,n):new h(null!=t?t:c.invalidRequest(e),"invalid")}function R(e,t){let r=null;if(e instanceof i?(r=b(e.id),null==r&&(r=m(e.method)),null==r&&(r=w(e.params))):e instanceof a?(r=m(e.method),null==r&&(r=w(e.params))):e instanceof l?(r=b(e.id),null==r&&(r=void 0===e.result?c.internalError("Result must exist for success Response objects"):null)):e instanceof u&&(r=b(e.id,!0),null==r&&(r=function(e){return e instanceof c?n(e.code)?O(e.message)?null:c.internalError("Message must exist or must be a string."):c.internalError("Invalid error code. It must be an integer."):c.internalError("Error must be an instance of JsonRpcError")}(e.error))),t&&null!=r)throw r;return r}function b(e,t){return t&&null===e||O(e)||n(e)?null:c.internalError('"id" must be provided, a string or an integer.')}function m(e){return O(e)?null:c.invalidRequest(e)}function w(e){if(void 0===e)return null;if(Array.isArray(e)||null!=(t=e)&&"object"==typeof t&&!Array.isArray(t))try{return JSON.stringify(e),null}catch(t){return c.parseError(e)}var t;return c.invalidParams(e)}function O(e){return""!==e&&"string"==typeof e}const S={JsonRpc:o,JsonRpcError:c,request:p,notification:d,success:f,error:_,parse:y,parseObject:E,parseJsonRpcObject:g,parseJsonRpcString:y},P=S},71477:function(e,t,r){(function(){var t,s,n,o,i,a,l,u,h,c,p,d;l=function(){class e{constructor(){this.onloadstart=null,this.onprogress=null,this.onabort=null,this.onerror=null,this.onload=null,this.ontimeout=null,this.onloadend=null,this._listeners={}}addEventListener(e,t){var r;e=e.toLowerCase(),(r=this._listeners)[e]||(r[e]=[]),this._listeners[e].push(t)}removeEventListener(e,t){var r;e=e.toLowerCase(),this._listeners[e]&&-1!==(r=this._listeners[e].indexOf(t))&&this._listeners[e].splice(r,1)}dispatchEvent(e){var t,r,s,n,o;if(e.currentTarget=e.target=this,t=e.type,o=this._listeners[t])for(r=0,s=o.length;r<s;r++)(n=o[r]).call(this,e);(n=this[`on${t}`])&&n.call(this,e)}}return e.prototype.onloadstart=null,e.prototype.onprogress=null,e.prototype.onabort=null,e.prototype.onerror=null,e.prototype.onload=null,e.prototype.ontimeout=null,e.prototype.onloadend=null,e}.call(this),h=r(13685),c=r(95687),p=r(22037),d=r(57310),a=function(){class e extends l{constructor(t){super(),this.onreadystatechange=null,this._anonymous=t&&t.anon,this.readyState=e.UNSENT,this.response=null,this.responseText="",this.responseType="",this.responseURL="",this.status=0,this.statusText="",this.timeout=0,this.upload=new u(this),this._method=null,this._url=null,this._sync=!1,this._headers=null,this._loweredHeaders=null,this._mimeOverride=null,this._request=null,this._response=null,this._responseParts=null,this._responseHeaders=null,this._aborting=null,this._error=null,this._loadedBytes=0,this._totalBytes=0,this._lengthComputable=!1}open(t,r,s,n,i){var a;if((t=t.toUpperCase())in this._restrictedMethods)throw new o(`HTTP method ${t} is not allowed in XHR`);switch(a=this._parseUrl(r),void 0===s&&(s=!0),this.readyState){case e.UNSENT:case e.OPENED:case e.DONE:case e.HEADERS_RECEIVED:case e.LOADING:}this._method=t,this._url=a,this._sync=!s,this._headers={},this._loweredHeaders={},this._mimeOverride=null,this._setReadyState(e.OPENED),this._request=null,this._response=null,this.status=0,this.statusText="",this._responseParts=[],this._responseHeaders=null,this._loadedBytes=0,this._totalBytes=0,this._lengthComputable=!1}setRequestHeader(r,s){var n;if(this.readyState!==e.OPENED)throw new t("XHR readyState must be OPENED");n=r.toLowerCase(),this._restrictedHeaders[n]||/^sec\-/.test(n)||/^proxy-/.test(n)?console.warn(`Refused to set unsafe header "${r}"`):(s=s.toString(),n in this._loweredHeaders?(r=this._loweredHeaders[n],this._headers[r]=this._headers[r]+", "+s):(this._loweredHeaders[n]=r,this._headers[r]=s))}send(r){if(this.readyState!==e.OPENED)throw new t("XHR readyState must be OPENED");if(this._request)throw new t("send() already called");switch(this._url.protocol){case"file:":this._sendFile(r);break;case"http:":case"https:":this._sendHttp(r);break;default:throw new s(`Unsupported protocol ${this._url.protocol}`)}}abort(){this._request&&(this._request.abort(),this._setError(),this._dispatchProgress("abort"),this._dispatchProgress("loadend"))}getResponseHeader(e){var t;return this._responseHeaders&&(t=e.toLowerCase())in this._responseHeaders?this._responseHeaders[t]:null}getAllResponseHeaders(){var e,t;return this._responseHeaders?function(){var r,s;for(e in s=[],r=this._responseHeaders)t=r[e],s.push(`${e}: ${t}`);return s}.call(this).join("\r\n"):""}overrideMimeType(r){if(this.readyState===e.LOADING||this.readyState===e.DONE)throw new t("overrideMimeType() not allowed in LOADING or DONE");this._mimeOverride=r.toLowerCase()}nodejsSet(e){var t;if("httpAgent"in e&&(this.nodejsHttpAgent=e.httpAgent),"httpsAgent"in e&&(this.nodejsHttpsAgent=e.httpsAgent),"baseUrl"in e){if(null!==(t=e.baseUrl)&&!d.parse(t,!1,!0).protocol)throw new i("baseUrl must be an absolute URL");this.nodejsBaseUrl=t}}static nodejsSet(t){e.prototype.nodejsSet(t)}_setReadyState(e){var t;this.readyState=e,t=new n("readystatechange"),this.dispatchEvent(t)}_sendFile(){if("GET"!==this._url.method)throw new s("The file protocol only supports GET");throw new Error("Protocol file: not implemented")}_sendHttp(e){if(this._sync)throw new Error("Synchronous XHR processing not implemented");null==e||"GET"!==this._method&&"HEAD"!==this._method?e||(e=""):(console.warn(`Discarding entity body for ${this._method} requests`),e=null),this.upload._setData(e),this._finalizeHeaders(),this._sendHxxpRequest()}_sendHxxpRequest(){var e,t,r;"http:"===this._url.protocol?(t=h,e=this.nodejsHttpAgent):(t=c,e=this.nodejsHttpsAgent),r=t.request({hostname:this._url.hostname,port:this._url.port,path:this._url.path,auth:this._url.auth,method:this._method,headers:this._headers,agent:e}),this._request=r,this.timeout&&r.setTimeout(this.timeout,(()=>this._onHttpTimeout(r))),r.on("response",(e=>this._onHttpResponse(r,e))),r.on("error",(e=>this._onHttpRequestError(r,e))),this.upload._startUpload(r),this._request===r&&this._dispatchProgress("loadstart")}_finalizeHeaders(){var e;this._headers.Connection="keep-alive",this._headers.Host=this._url.host,this._anonymous&&(this._headers.Referer="about:blank"),(e=this._headers)["User-Agent"]||(e["User-Agent"]=this._userAgent),this.upload._finalizeHeaders(this._headers,this._loweredHeaders)}_onHttpResponse(t,r){var s;if(this._request===t){switch(r.statusCode){case 301:case 302:case 303:case 307:case 308:return this._url=this._parseUrl(r.headers.location),this._method="GET","content-type"in this._loweredHeaders&&(delete this._headers[this._loweredHeaders["content-type"]],delete this._loweredHeaders["content-type"]),"Content-Type"in this._headers&&delete this._headers["Content-Type"],delete this._headers["Content-Length"],this.upload._reset(),this._finalizeHeaders(),void this._sendHxxpRequest()}return this._response=r,this._response.on("data",(e=>this._onHttpResponseData(r,e))),this._response.on("end",(()=>this._onHttpResponseEnd(r))),this._response.on("close",(()=>this._onHttpResponseClose(r))),this.responseURL=this._url.href.split("#")[0],this.status=this._response.statusCode,this.statusText=h.STATUS_CODES[this.status],this._parseResponseHeaders(r),(s=this._responseHeaders["content-length"])?(this._totalBytes=parseInt(s),this._lengthComputable=!0):this._lengthComputable=!1,this._setReadyState(e.HEADERS_RECEIVED)}}_onHttpResponseData(t,r){if(this._response===t)return this._responseParts.push(r),this._loadedBytes+=r.length,this.readyState!==e.LOADING&&this._setReadyState(e.LOADING),this._dispatchProgress("progress")}_onHttpResponseEnd(t){if(this._response===t)return this._parseResponse(),this._request=null,this._response=null,this._setReadyState(e.DONE),this._dispatchProgress("load"),this._dispatchProgress("loadend")}_onHttpResponseClose(t){var r;if(this._response===t)return r=this._request,this._setError(),r.abort(),this._setReadyState(e.DONE),this._dispatchProgress("error"),this._dispatchProgress("loadend")}_onHttpTimeout(t){if(this._request===t)return this._setError(),t.abort(),this._setReadyState(e.DONE),this._dispatchProgress("timeout"),this._dispatchProgress("loadend")}_onHttpRequestError(t,r){if(this._request===t)return this._setError(),t.abort(),this._setReadyState(e.DONE),this._dispatchProgress("error"),this._dispatchProgress("loadend")}_dispatchProgress(e){var t;(t=new n(e)).lengthComputable=this._lengthComputable,t.loaded=this._loadedBytes,t.total=this._totalBytes,this.dispatchEvent(t)}_setError(){this._request=null,this._response=null,this._responseHeaders=null,this._responseParts=null}_parseUrl(e){var t,r,s,n,o;return t=null===this.nodejsBaseUrl?e:d.resolve(this.nodejsBaseUrl,e),(o=d.parse(t,!1,!0)).hash=null,!o.auth||null==n&&null==s||(-1===(r=o.auth.indexOf(":"))?n||(n=o.auth):(n||(n=o.substring(0,r)),s||(s=o.substring(r+1)))),(n||s)&&(o.auth=`${n}:${s}`),o}_parseResponseHeaders(e){var t,r,s,n;for(r in this._responseHeaders={},s=e.headers)n=s[r],t=r.toLowerCase(),this._privateHeaders[t]||(null!==this._mimeOverride&&"content-type"===t&&(n=this._mimeOverride),this._responseHeaders[t]=n);null===this._mimeOverride||"content-type"in this._responseHeaders||(this._responseHeaders["content-type"]=this._mimeOverride)}_parseResponse(){var e,t,r,s,n,o;switch(t=Buffer.concat?Buffer.concat(this._responseParts):this._concatBuffers(this._responseParts),this._responseParts=null,this.responseType){case"text":default:this._parseTextResponse(t);break;case"json":this.responseText=null;try{this.response=JSON.parse(t.toString("utf-8"))}catch(e){this.response=null}break;case"buffer":this.responseText=null,this.response=t;break;case"arraybuffer":for(this.responseText=null,e=new ArrayBuffer(t.length),o=new Uint8Array(e),r=s=0,n=t.length;0<=n?s<n:s>n;r=0<=n?++s:--s)o[r]=t[r];this.response=e}}_parseTextResponse(e){try{this.responseText=e.toString(this._parseResponseEncoding())}catch(t){this.responseText=e.toString("binary")}this.response=this.responseText}_parseResponseEncoding(){var e,t;return(e=this._responseHeaders["content-type"])&&(t=/\;\s*charset\=(.*)$/.exec(e))?t[1]:"utf-8"}_concatBuffers(e){var t,r,s,n,o,i,a;if(0===e.length)return Buffer.alloc(0);if(1===e.length)return e[0];for(i=0,r=0,n=e.length;r<n;r++)i+=(t=e[r]).length;for(a=Buffer.alloc(i),i=0,s=0,o=e.length;s<o;s++)(t=e[s]).copy(a,i),i+=t.length;return a}}return e.prototype.onreadystatechange=null,e.prototype.readyState=null,e.prototype.response=null,e.prototype.responseText=null,e.prototype.responseType=null,e.prototype.status=null,e.prototype.timeout=null,e.prototype.upload=null,e.prototype.UNSENT=0,e.UNSENT=0,e.prototype.OPENED=1,e.OPENED=1,e.prototype.HEADERS_RECEIVED=2,e.HEADERS_RECEIVED=2,e.prototype.LOADING=3,e.LOADING=3,e.prototype.DONE=4,e.DONE=4,e.prototype.nodejsHttpAgent=h.globalAgent,e.prototype.nodejsHttpsAgent=c.globalAgent,e.prototype.nodejsBaseUrl=null,e.prototype._restrictedMethods={CONNECT:!0,TRACE:!0,TRACK:!0},e.prototype._restrictedHeaders={"accept-charset":!0,"accept-encoding":!0,"access-control-request-headers":!0,"access-control-request-method":!0,connection:!0,"content-length":!0,cookie:!0,cookie2:!0,date:!0,dnt:!0,expect:!0,host:!0,"keep-alive":!0,origin:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,via:!0},e.prototype._privateHeaders={"set-cookie":!0,"set-cookie2":!0},e.prototype._userAgent=`Mozilla/5.0 (${p.type()} ${p.arch()}) node.js/${process.versions.node} v8/${process.versions.v8}`,e}.call(this),e.exports=a,a.XMLHttpRequest=a,o=class extends Error{constructor(){super()}},a.SecurityError=o,t=class extends Error{constructor(){super()}},t=class extends Error{},a.InvalidStateError=t,s=class extends Error{constructor(){super()}},a.SyntaxError=i,i=class extends Error{constructor(){super()}},n=function(){class e{constructor(e){this.type=e,this.target=null,this.currentTarget=null,this.lengthComputable=!1,this.loaded=0,this.total=0}}return e.prototype.bubbles=!1,e.prototype.cancelable=!1,e.prototype.target=null,e.prototype.loaded=null,e.prototype.lengthComputable=null,e.prototype.total=null,e}.call(this),a.ProgressEvent=n,u=class extends l{constructor(e){super(),this._request=e,this._reset()}_reset(){this._contentType=null,this._body=null}_setData(e){var t,r,s,n,o,i,a,l;if(null!=e)if("string"==typeof e)0!==e.length&&(this._contentType="text/plain;charset=UTF-8"),this._body=Buffer.from(e,"utf8");else if(Buffer.isBuffer(e))this._body=e;else if(e instanceof ArrayBuffer){for(t=Buffer.alloc(e.byteLength),l=new Uint8Array(e),r=s=0,i=e.byteLength;0<=i?s<i:s>i;r=0<=i?++s:--s)t[r]=l[r];this._body=t}else{if(!(e.buffer&&e.buffer instanceof ArrayBuffer))throw new Error(`Unsupported send() data ${e}`);for(t=Buffer.alloc(e.byteLength),o=e.byteOffset,l=new Uint8Array(e.buffer),r=n=0,a=e.byteLength;0<=a?n<a:n>a;r=0<=a?++n:--n)t[r]=l[r+o];this._body=t}}_finalizeHeaders(e,t){this._contentType&&("content-type"in t||(e["Content-Type"]=this._contentType)),this._body&&(e["Content-Length"]=this._body.length.toString())}_startUpload(e){this._body&&e.write(this._body),e.end()}},a.XMLHttpRequestUpload=u}).call(this)},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},57310:e=>{"use strict";e.exports=require("url")}},t={};function r(s){var n=t[s];if(void 0!==n)return n.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,r),o.exports}r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return(()=>{"use strict";r.r(s),r.d(s,{HTTP_RPC:()=>c,default:()=>p});var e=r(52043);function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var u="undefined"!=typeof window&&window.XMLHttpRequest?window.XMLHttpRequest:r(71477),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(p,e);var t,r,s,h,c=(s=p,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=l(s);if(h){var r=l(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return a(this,e)});function p(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http://localhost:23456",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6e4,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{headers:[]};return n(this,p),(e=c.call(this)).type="http",e.host=t,e.timeout=r,e.headers=s.headers,e.requestId=0,e}return t=p,r=[{key:"_getRequest",value:function(){var e=new u;return e.open("POST",this.host),e.setRequestHeader("Content-Type","application/json;charset=utf-8"),this.headers&&this.headers.forEach((function(t){e.setRequestHeader(t.name,t.value)})),e.id=this.requestId++,e}},{key:"_send",value:function(e){var t=this;return new Promise((function(r,s){var n=!1,o=t._getRequest(),i=t._addReq({request:o,rej:function(e){n=!0,s(e)}}),a=function(){l&&clearTimeout(l),l=null,t._removeReq(i)},l=t.timeout?setTimeout((function(){if(!n)return o.abort(),a(),s(t.ERRORS.TIMEOUT(t.timeout))}),t.timeout):null;o.onreadystatechange=function(){if(4===o.readyState&&!n){a();var e=o.responseText;try{if((e=e?JSON.parse(e):null)&&e.error)return s(e)}catch(r){return s(t.ERRORS.INVALID_RESPONSE(e))}return r(e)}};try{o.send(JSON.stringify(e))}catch(e){return a(),s(t.ERRORS.CONNECT(t.host))}}))}},{key:"request",value:function(e,t){var r=this,s=this._getRequestPayload(e,t);return s instanceof Error?Promise.reject(s):this._send(s).then((function(e){if(!e)throw r.ERRORS.INVALID_RESPONSE(e);return{result:e.result||null,error:e.error||null}}))}},{key:"sendNotification",value:function(e,t){var r=this._getNotificationPayload(e,t);return r instanceof Error?Promise.reject(r):this._send(r)}},{key:"batch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this._getBatchPayload(e);return t instanceof Error?Promise.reject(t):this._send(t).then((function(e){e=(e||[]).sort((function(e,t){return e.id-t.id}));var r=[],s=0;return t.forEach((function(t){t.id?(r.push({result:e&&e[s]&&e[s].result||null,error:e&&e[s]&&e[s].error||null}),s++):r.push(null)})),e=null,t=null,r}))}}],r&&o(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),p}(e.Z),c=h;const p=h})(),s})()));